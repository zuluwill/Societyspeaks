{% extends "emails/base_email.html" %}

{% block title %}Daily Question #{{ question_number }} - Society Speaks{% endblock %}

{% block preheader %}{{ question_text[:100] }}...{% endblock %}

{% block header_title %}Daily Question{% endblock %}

{% block header_subtitle %}
<tr>
    <td align="center" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; font-size: 14px; color: #bfdbfe;">
        #{{ question_number }} &bull; {{ topic_category }}
    </td>
</tr>
{% endblock %}

{% block content %}
<table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%">
    {% if streak_message and streak_message.strip() %}
    <tr>
        <td style="padding-bottom: 20px;">
            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="background-color: #fef3c7; border-radius: 8px;">
                <tr>
                    <td style="padding: 12px 16px;">
                        <span style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; font-size: 14px; color: #92400e;">
                            ðŸ”¥ {{ streak_message }}
                        </span>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    {% endif %}
    
    <!-- The Question -->
    <tr>
        <td style="padding-bottom: 24px;">
            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="background-color: #f8fafc; border-radius: 12px; border: 2px solid #e2e8f0;">
                <tr>
                    <td style="padding: 28px;">
                        <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%">
                            <tr>
                                <td style="font-family: Georgia, 'Times New Roman', serif; font-size: 22px; font-weight: 600; line-height: 1.4; color: #0f172a; text-align: center;">
                                    {{ question_text }}
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    
    {% if question_context and question_context.strip() %}
    <tr>
        <td style="padding-bottom: 24px;">
            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="background-color: #eff6ff; border-left: 4px solid #3b82f6; border-radius: 0 8px 8px 0;">
                <tr>
                    <td style="padding: 16px 20px;">
                        <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%">
                            <tr>
                                <td style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; font-size: 11px; font-weight: 700; letter-spacing: 0.5px; color: #1e3a8a; text-transform: uppercase; padding-bottom: 8px;">
                                    Context
                                </td>
                            </tr>
                            <tr>
                                <td style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; font-size: 14px; line-height: 1.6; color: #1e40af;">
                                    {{ question_context }}
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    {% endif %}
    
    <!-- One-Click Vote Buttons -->
    <tr>
        <td style="padding-bottom: 16px;">
            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%">
                <tr>
                    <td align="center" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; font-size: 14px; font-weight: 600; color: #374151; padding-bottom: 12px;">
                        Tap to vote:
                    </td>
                </tr>
                <!-- Desktop: Horizontal row (hidden on mobile) -->
                <tr class="vote-buttons-row">
                    <td align="center">
                        <table role="presentation" cellpadding="0" cellspacing="0" border="0">
                            <tr>
                                <td style="padding: 0 6px;">
                                    <a href="{{ vote_agree_url }}" target="_blank" style="display: inline-block; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; font-size: 16px; font-weight: 600; color: #ffffff; text-decoration: none; padding: 14px 24px; background-color: #2563eb; border-radius: 8px; white-space: nowrap;">
                                        &#10003; Agree
                                    </a>
                                </td>
                                <td style="padding: 0 6px;">
                                    <a href="{{ vote_disagree_url }}" target="_blank" style="display: inline-block; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; font-size: 16px; font-weight: 600; color: #ffffff; text-decoration: none; padding: 14px 24px; background-color: #dc2626; border-radius: 8px; white-space: nowrap;">
                                        &#10007; Disagree
                                    </a>
                                </td>
                                <td style="padding: 0 6px;">
                                    <a href="{{ vote_unsure_url }}" target="_blank" style="display: inline-block; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; font-size: 16px; font-weight: 600; color: #ffffff; text-decoration: none; padding: 14px 24px; background-color: #6b7280; border-radius: 8px; white-space: nowrap;">
                                        ? Unsure
                                    </a>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <!-- Mobile: Stacked buttons (hidden on desktop, shown on mobile via media query) -->
                <!--[if !mso]><!-->
                <tr>
                    <td align="center">
                        <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" class="vote-buttons-stack" style="display: none; max-width: 280px; margin: 0 auto;">
                            <tr>
                                <td style="padding-bottom: 10px;">
                                    <a href="{{ vote_agree_url }}" target="_blank" class="vote-btn-mobile" style="display: block; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; font-size: 18px; font-weight: 600; color: #ffffff; text-decoration: none; padding: 16px 24px; background-color: #2563eb; border-radius: 8px; text-align: center; white-space: nowrap;">
                                        &#10003; Agree
                                    </a>
                                </td>
                            </tr>
                            <tr>
                                <td style="padding-bottom: 10px;">
                                    <a href="{{ vote_disagree_url }}" target="_blank" class="vote-btn-mobile" style="display: block; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; font-size: 18px; font-weight: 600; color: #ffffff; text-decoration: none; padding: 16px 24px; background-color: #dc2626; border-radius: 8px; text-align: center; white-space: nowrap;">
                                        &#10007; Disagree
                                    </a>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <a href="{{ vote_unsure_url }}" target="_blank" class="vote-btn-mobile" style="display: block; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; font-size: 18px; font-weight: 600; color: #ffffff; text-decoration: none; padding: 16px 24px; background-color: #6b7280; border-radius: 8px; text-align: center; white-space: nowrap;">
                                        ? Unsure
                                    </a>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <!--<![endif]-->
            </table>
        </td>
    </tr>
    
    <!-- Or full experience link -->
    <tr>
        <td align="center" style="padding-bottom: 24px;">
            <p style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; font-size: 13px; color: #6b7280; margin: 0;">
                Or <a href="{{ magic_link_url }}" style="color: #1e40af; text-decoration: underline;">vote on the website</a> to add your reasoning
            </p>
        </td>
    </tr>
    
    {% if why_this_question and why_this_question.strip() %}
    <tr>
        <td style="padding-bottom: 20px;">
            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="background-color: #fefce8; border-left: 4px solid #eab308; border-radius: 0 8px 8px 0;">
                <tr>
                    <td style="padding: 16px 20px;">
                        <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%">
                            <tr>
                                <td style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; font-size: 11px; font-weight: 700; letter-spacing: 0.5px; color: #a16207; text-transform: uppercase; padding-bottom: 8px;">
                                    Why This Question?
                                </td>
                            </tr>
                            <tr>
                                <td style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; font-size: 14px; line-height: 1.6; color: #713f12;">
                                    {{ why_this_question }}
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    {% endif %}
    
    <tr>
        <td style="border-top: 1px solid #e5e7eb; padding-top: 16px;">
            <p style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; font-size: 12px; line-height: 1.5; color: #9ca3af; margin: 0; text-align: center;">
                Or visit <a href="{{ question_url }}" style="color: #1e40af;">{{ question_url }}</a>
            </p>
        </td>
    </tr>
</table>
{% endblock %}

{% block support_message %}
<!-- Support Message - Promote Personal Briefs -->
<tr>
    <td style="background: linear-gradient(135deg, #1e40af 0%, #312e81 100%); padding: 32px 28px;">
        <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%">
            <tr>
                <td align="center" style="font-family: Georgia, 'Times New Roman', serif; font-size: 20px; font-weight: 700; color: #ffffff; padding-bottom: 12px;">
                    Support Open Source Civic Tech
                </td>
            </tr>
            <tr>
                <td align="center" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; font-size: 15px; line-height: 1.6; color: #bfdbfe; padding-bottom: 20px;">
                    Love the Daily Question? Try <strong style="color: #ffffff;">Personal Briefs</strong> &mdash; create custom daily digests from the sources you trust. Politics, tech, climate, or your own research PDFs. Your subscription directly funds our free civic tools.
                </td>
            </tr>
            <tr>
                <td align="center" style="padding-bottom: 12px;">
                    <table role="presentation" cellpadding="0" cellspacing="0" border="0">
                        <tr>
                            <td align="center" style="background-color: #ffffff; border-radius: 6px;">
                                <a href="{{ base_url }}/briefings/landing" target="_blank" style="display: inline-block; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; font-size: 14px; font-weight: 600; color: #1e40af; text-decoration: none; padding: 12px 24px;">
                                    &#10084; Support Our Work
                                </a>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="center" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; font-size: 12px; color: #93c5fd;">
                    30-day free trial &bull; From Â£12/month &bull; Funds open source development
                </td>
            </tr>
        </table>
    </td>
</tr>
{% endblock %}

{% block footer_links %}
<tr>
    <td align="center" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; font-size: 12px; color: #475569;">
        <a href="{{ unsubscribe_url }}" target="_blank" style="color: #64748b; text-decoration: underline;">Unsubscribe</a>
    </td>
</tr>
{% endblock %}
