{#
  Password field with inline validation feedback.
  Usage: {% include 'partner/components/_password_field.html' %}
  Requires: a wrapping <form> and a unique pw_input_id variable (or uses default 'pwField').
#}
{% set pw_id = pw_input_id|default('pwField') %}
<div>
  <label class="block text-sm font-medium text-gray-700 mb-1">{{ pw_label|default('Password') }}</label>
  <input name="password" id="{{ pw_id }}" type="password" minlength="8"
         autocomplete="{{ pw_autocomplete|default('new-password') }}"
         class="w-full rounded-lg border border-gray-300 px-4 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
  <div class="mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-xs" data-pw-checks="{{ pw_id }}">
    <div data-check="len" class="flex items-center text-gray-400">
      <svg class="w-3.5 h-3.5 mr-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke-width="2"/></svg>
      8+ characters
    </div>
    <div data-check="upper" class="flex items-center text-gray-400">
      <svg class="w-3.5 h-3.5 mr-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke-width="2"/></svg>
      Uppercase letter
    </div>
    <div data-check="lower" class="flex items-center text-gray-400">
      <svg class="w-3.5 h-3.5 mr-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke-width="2"/></svg>
      Lowercase letter
    </div>
    <div data-check="digit" class="flex items-center text-gray-400">
      <svg class="w-3.5 h-3.5 mr-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke-width="2"/></svg>
      One digit
    </div>
  </div>
</div>

<script>
(function() {
  var pw = document.getElementById('{{ pw_id }}');
  if (!pw) return;
  var container = document.querySelector('[data-pw-checks="{{ pw_id }}"]');
  if (!container) return;

  var checks = {
    len:   function(v) { return v.length >= 8; },
    upper: function(v) { return /[A-Z]/.test(v); },
    lower: function(v) { return /[a-z]/.test(v); },
    digit: function(v) { return /[0-9]/.test(v); }
  };

  var passIcon = '<svg class="w-3.5 h-3.5 mr-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>';
  var failIcon = '<svg class="w-3.5 h-3.5 mr-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke-width="2"/></svg>';

  pw.addEventListener('input', function() {
    var val = pw.value;
    for (var name in checks) {
      var el = container.querySelector('[data-check="' + name + '"]');
      if (!el) continue;
      var ok = checks[name](val);
      el.classList.toggle('text-emerald-600', ok);
      el.classList.toggle('text-gray-400', !ok);
      var text = el.textContent.trim();
      el.innerHTML = (ok ? passIcon : failIcon) + ' ' + text;
    }
  });
})();
</script>
